<!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <title>AGENT&lowbar;SYNOPSIS&period;md</title>
            <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only],
.vscode-high-contrast:not(.vscode-high-contrast-light) img[src$=\#gh-light-mode-only],
.vscode-high-contrast-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
<style>
:root {
  --color-note: #0969da;
  --color-tip: #1a7f37;
  --color-warning: #9a6700;
  --color-severe: #bc4c00;
  --color-caution: #d1242f;
  --color-important: #8250df;
}

</style>
<style>
@media (prefers-color-scheme: dark) {
  :root {
    --color-note: #2f81f7;
    --color-tip: #3fb950;
    --color-warning: #d29922;
    --color-severe: #db6d28;
    --color-caution: #f85149;
    --color-important: #a371f7;
  }
}

</style>
<style>
.markdown-alert {
  padding: 0.5rem 1rem;
  margin-bottom: 16px;
  color: inherit;
  border-left: .25em solid #888;
}

.markdown-alert>:first-child {
  margin-top: 0
}

.markdown-alert>:last-child {
  margin-bottom: 0
}

.markdown-alert .markdown-alert-title {
  display: flex;
  font-weight: 500;
  align-items: center;
  line-height: 1
}

.markdown-alert .markdown-alert-title .octicon {
  margin-right: 0.5rem;
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-alert.markdown-alert-note {
  border-left-color: var(--color-note);
}

.markdown-alert.markdown-alert-note .markdown-alert-title {
  color: var(--color-note);
}

.markdown-alert.markdown-alert-important {
  border-left-color: var(--color-important);
}

.markdown-alert.markdown-alert-important .markdown-alert-title {
  color: var(--color-important);
}

.markdown-alert.markdown-alert-warning {
  border-left-color: var(--color-warning);
}

.markdown-alert.markdown-alert-warning .markdown-alert-title {
  color: var(--color-warning);
}

.markdown-alert.markdown-alert-tip {
  border-left-color: var(--color-tip);
}

.markdown-alert.markdown-alert-tip .markdown-alert-title {
  color: var(--color-tip);
}

.markdown-alert.markdown-alert-caution {
  border-left-color: var(--color-caution);
}

.markdown-alert.markdown-alert-caution .markdown-alert-title {
  color: var(--color-caution);
}

</style>
        
        </head>
        <body class="vscode-body vscode-light">
            <h1 id="agent_synopsismd">AGENT_SYNOPSIS.md</h1>
<h2 id="1-project-overview">1. Project Overview</h2>
<p>This project is an <strong>industrial-scale Numerical Dynamical Systems Application</strong>, designed to be a comprehensive tool for analyzing both <strong>continuous flows (ODEs)</strong> and <strong>discrete maps</strong>.</p>
<p>The goal is to build a high-performance, rigorous mathematical engine in <strong>Rust</strong> (compiled to <strong>WebAssembly</strong>) that powers a modern, interactive web interface. The development strategy follows a &quot;Core-First&quot; approach: building and verifying the math engine as a headless CLI/library before constructing the React/Three.js visualization layer.</p>
<h2 id="2-architecture">2. Architecture</h2>
<p>The project is a <strong>Monorepo</strong> containing both the Rust core and the React frontend.</p>
<h3 id="directory-structure">Directory Structure</h3>
<pre><code>/ (root)
  Cargo.toml            # Workspace definition
  /crates
    /fork_core          # The Pure Rust Math Library (Parsing, Integration, Analysis)
    /fork_cli           # Command Line Interface (Binary, consumes fork_core)
    /fork_wasm          # WASM Bindings (Library, exposes fork_core to JS)
  /web                  # React Application (Vite, TypeScript, consumes fork_wasm)
</code></pre>
<ul>
<li><strong>Core (Rust)</strong>: Handles all parsing, evaluation, integration, and numerical analysis.</li>
<li><strong>Frontend (React)</strong>: Handles visualization and user interaction.
<ul>
<li><strong>3D</strong>: <code>react-three-fiber</code> (R3F) for orbits and manifolds.</li>
<li><strong>2D</strong>: <code>react-plotly.js</code> for bifurcation diagrams and charts.</li>
<li><strong>Bitmaps</strong>: HTML5 Canvas for dense heatmaps (Lyapunov fractals).</li>
</ul>
</li>
</ul>
<h2 id="3-key-features--modules">3. Key Features &amp; Modules</h2>
<ul>
<li><strong>Universal System Support</strong>: Flows (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>x</mi><mo>˙</mo></mover><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\dot{x} = f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1111em;"><span class="mord">˙</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>) and Maps (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x_{n+1} = f(x_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>).</li>
<li><strong>Equation Engine</strong>: Runtime parsing/evaluation.</li>
<li><strong>Simulation</strong>: RK4/RK45 for flows, iteration for maps.</li>
<li><strong>State Space</strong>: Real-time 3D visualization.</li>
<li><strong>Continuation</strong>: PALC for tracing equilibria and detecting bifurcations.</li>
<li><strong>Analysis</strong>: Lyapunov Spectrum, PSD, Jacobian analysis.</li>
</ul>
<h2 id="4-data-structures">4. Data Structures</h2>
<ul>
<li><strong><code>DynamicalSystem</code></strong>: Encompasses equations, parameters, and system type.</li>
<li><strong><code>Equation</code></strong>: <code>{ variable: string, expression: string }</code></li>
<li><strong><code>Parameter</code></strong>: <code>{ name: string, value: number }</code></li>
</ul>
<h2 id="5-algorithms-to-port-rustwasm">5. Algorithms to Port (Rust/WASM)</h2>
<ul>
<li><strong>Expression Parsing</strong>: <code>meval</code> or <code>evalexpr</code> (or custom).</li>
<li><strong>Integration</strong>: RK4 (Flow), Iteration (Map).</li>
<li><strong>Continuation</strong>: PALC with Newton-Raphson.</li>
<li><strong>Differentiation</strong>: Automatic Differentiation (AutoDiff) or Symbolic.</li>
<li><strong>Linear Algebra</strong>: Eigenvalues, QR, SVD.</li>
</ul>
<h2 id="6-development-roadmap-core-first">6. Development Roadmap: &quot;Core-First&quot;</h2>
<h3 id="phase-1-rust-core--cli-headless">Phase 1: Rust Core &amp; CLI (Headless)</h3>
<ol>
<li><strong>Workspace Setup</strong>: (Completed) <code>fork_core</code>, <code>fork_cli</code>, <code>fork_wasm</code> initialized.</li>
<li><strong>Math Engine (<code>fork_core</code>)</strong>:
<ul>
<li>Implement <code>Equation</code> parser/evaluator.</li>
<li>Implement <code>Integrator</code> traits (Flow vs Map).</li>
<li>Implement <code>RK4</code> solver.</li>
</ul>
</li>
<li><strong>CLI Tool (<code>fork_cli</code>)</strong>:
<ul>
<li>Build a CLI to define a system and run a simulation.</li>
<li>Output results to CSV/stdout for verification.</li>
<li><strong>Goal</strong>: Verify Lorenz attractor generation matches benchmark data.</li>
</ul>
</li>
</ol>
<h3 id="phase-2-analysis-modules-rust">Phase 2: Analysis Modules (Rust)</h3>
<ol start="4">
<li><strong>Lyapunov Spectrum</strong>: Implement QR-based algorithm.</li>
<li><strong>Jacobian</strong>: Implement AutoDiff support.</li>
<li><strong>Verification</strong>: Add CLI commands to compute exponents for known systems.</li>
</ol>
<h3 id="phase-3-the-wasm-bridge">Phase 3: The WASM Bridge</h3>
<ol start="7">
<li><strong>Bindings (<code>fork_wasm</code>)</strong>: Expose <code>DynamicalSystem</code> and <code>Integrator</code> to JS.</li>
<li><strong>Memory Management</strong>: efficient transfer of <code>Float64Array</code> buffers.</li>
</ol>
<h3 id="phase-4-frontend-foundation">Phase 4: Frontend Foundation</h3>
<ol start="9">
<li><strong>React Setup</strong>: (Completed) Vite project initialized in <code>/web</code>.</li>
<li><strong>Rendering</strong>: Install <code>react-three-fiber</code>, <code>drei</code>.</li>
<li><strong>Integration</strong>: Connect WASM output to R3F mesh updates.</li>
</ol>
<h3 id="phase-5-advanced-ui--polish">Phase 5: Advanced UI &amp; Polish</h3>
<ol start="12">
<li><strong>System Editor</strong>: UI for defining equations.</li>
<li><strong>Analysis Dashboard</strong>: Plotly charts for bifurcation diagrams.</li>
<li><strong>Optimization</strong>: Web Workers, SharedArrayBuffer.</li>
</ol>

            <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
            
        </body>
        </html>